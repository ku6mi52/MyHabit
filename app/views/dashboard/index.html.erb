<% if @daily_record_form %>
  <section class="card">
    <h2 class="text-xl text-green-700">‰ªäÊó•(<%= Date.today.strftime("%Y-%m-%d") %>)„ÅÆË®òÈå≤</h2>

    <%= form_with model: (@daily_record || current_user.daily_records.build(recorded_on: @today)), local: true do |f| %>
      <%= f.hidden_field :recorded_on, value: @today %>
      <div>
        <%= f.label :weight, "‰ΩìÈáç" %><br>
        <%= f.number_field :weight, step: "0.1" %>
      </div>

      <div>
        <%= f.label :body_fat_percentage, "‰ΩìËÑÇËÇ™Áéá" %><br>
        <%= f.number_field :body_fat_percentage, step: "0.1" %>
      </div>

      <div>
        <%= f.label :motivation, "„É¢„ÉÅ„Éô„Éº„Ç∑„Éß„É≥" %><br>
        <%= form.hidden_field :recorded_on, value: date %>
        <%= form.radio_button :motivation, "very_low" %>
        <%= form.label :motivation, "üòñ" %>
        <%= form.radio_button :motivation, "low" %>
        <%= form.label :motivation, "üòë" %>
        <%= form.radio_button :motivation, "high" %>
        <%= form.label :motivation, "üôÇ" %>
        <%= form.radio_button :motivation, "very_high" %>
        <%= form.label :motivation, "üòÜ" %>
        <%= f.submit(f.object.persisted? ? "Êõ¥Êñ∞" : "‰øùÂ≠ò") %>
      <% end %>
  </section>
<% else %>
  <% if @goal_diff_kg %>
    <section class="card">
      ÁõÆÊ®ô„Åæ„Åß<strong><%= format('%+.1f', @goal_diff_kg) %>kg</strong>
    </section>
  <% end %>
<% end %>

<section class="card">
  <h2>‰ªäÊó•(<%= Date.today.strftime("%Y-%m-%d") %>)„ÅÆ„Çø„Çπ„ÇØ</h2>

  <%= form_with url: today_tasks_update_habit_checks_path, method: :patch, local: true do |form| %>
    <%= form.hidden_field :recorded_on, value: @today %>
    <ul>
      <% @habit_checks.each do |habit_check| %>
        <li>
          <%= fields_for "habit_checks[#{habit_check.habit_id}]" do |f| %>
            <%= f.check_box :done %>
            <%= f.label :done, habit_check.habit.name %>
          <% end %>
        </li>
      <% end %>
    </ul>
    <%= form.submit "ÈÄÅ‰ø°„Åô„Çã" %>
  <% end %>
</section>
