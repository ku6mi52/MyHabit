<h1>Ë®òÈå≤‰∏ÄË¶ß</h1>

<table>
  <thead>
    <tr>
      <th>Êó•‰ªò</th>
      <th>‰ΩìÈáç</th>
      <th>‰ΩìËÑÇËÇ™Áéá</th>
      <th>„É¢„ÉÅ„Éô„Éº„Ç∑„Éß„É≥</th>
      <th>„Çø„Çπ„ÇØ„ÅÆÈÅîÊàêÁéá</th>
    </tr>
  </thead>


  <%= paginate @dates %>
  <tbody>
    <% @dates.each do |date| %>
      <% daily_record = @daily_records[date] %>

      <tr>
        <td><%= date.strftime("%YÂπ¥%mÊúà%dÊó•") %></td>
        <td>
          <% if daily_record %>
            <%= form_with model: daily_record, url: daily_record_path(daily_record), method: :patch, local: true do |form| %>
              <%= form.number_field :weight %>
              <%= form.submit "Êõ¥Êñ∞" %>
            <% end %>
            <% if daily_record.weight.present? %>
              <%= button_to "ÂâäÈô§", daily_record_path(daily_record), method: :patch, params: { daily_record: { weight: nil } }, data: { turbo_confirm: "‰ΩìÈáç„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü" } %>
            <% end %>
          <% else %>
            <%= form_with url: daily_records_path, scope: :daily_record, method: :post, local: true do |form| %>
              <%= form.hidden_field :recorded_on, value: date %>
              <%= form.number_field :weight %>
              <%= form.submit "‰øùÂ≠ò" %>
            <% end %>
          <% end %>
        </td>

        <td>
          <% if daily_record %>
            <%= form_with model: daily_record, url: daily_record_path(daily_record), method: :patch, local: true do |form| %>
              <%= form.number_field :body_fat_percentage %>
              <%= form.submit "Êõ¥Êñ∞" %>
            <% end %>
            <% if daily_record.body_fat_percentage.present? %>
              <%= button_to "ÂâäÈô§", daily_record_path(daily_record), method: :patch, params: { daily_record: { body_fat_percentage: nil } }, data: { turbo_confirm: "‰ΩìËÑÇËÇ™Áéá„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü" } %>
            <% end %>
          <% else %>
            <%= form_with url: daily_records_path, scope: :daily_record, method: :post, local: true do |form| %>
              <%= form.hidden_field :recorded_on, value: date %>
              <%= form.number_field :body_fat_percentage %>
              <%= form.submit "‰øùÂ≠ò" %>
            <% end %>
          <% end %>
        </td>

        <td>
          <% if daily_record %>
            <%= daily_record.motivation %>
          <% else %>
            <%= form_with url: daily_records_path, scope: :daily_record, method: :post, local: true do |form| %>
              <%= form.hidden_field :recorded_on, value: date %>
              <%= form.radio_button :motivation, "üòñ" %>
              <%= form.label :motivation, "üòñ" %>
              <%= form.radio_button :motivation, "üòë" %>
              <%= form.label :motivation, "üòë" %>
              <%= form.radio_button :motivation, "üôÇ" %>
              <%= form.label :motivation, "üôÇ" %>
              <%= form.radio_button :motivation, "üòÜ" %>
              <%= form.label :motivation, "üòÜ" %>
              <%= form.submit "‰øùÂ≠ò" %>
            <% end %>
          <% end %>
        </td>
        <td><% if daily_record %><%= @rates[daily_record.id] %>%<% end %></td>
      </tr>
    <% end %>
  </tbody>
  <%= paginate @dates %>
</table>
